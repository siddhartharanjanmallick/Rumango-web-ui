
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" 
          integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
    <link rel="stylesheet" type="text/css" href="jobListPage/web/css/common.css" />
    <link rel="stylesheet" type="text/css" href="jobListPage/web/css/fonts.css" />
    <link rel="stylesheet" type="text/css" href="jobListPage/web/css/JobListPage.css" />
    <script type="text/javascript" src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script type="text/javascript" src="https://unpkg.com/headroom.js@0.12.0/dist/headroom.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/px2code/posize/build/v1.00.6.js"></script>


</head>

<body style="display: flex; flex-direction: column">
    <div class="job-list-page block layout">
         
       <div class="box layout"></div>   
        <div class="block1 layout">
            
            <div style="--src:url(../assets/fad3bb21f0460df1a9d73cdc935618d2.png)" class="block2 layout"></div>
            <div class="block3 layout">
                <div class="block4 layout">
                    <div class="group layout">
                        <div class="block5 layout">
                            <div class="block5__item">
                                <img src="jobListPage/web/assets/7167ce581006f73e6f64164742db669e.png" alt="" class="icon layout" />
                            </div>
                            <div class="spacer block5__spacer"></div>
                            <div class="text_body layout">
                                <a href="AdminDashboard.html"
                                   style="text-decoration: none; color:rgb(138, 169, 182);">Dashboard
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="block6 layout">
                    <div class="flex layout">
                        <div class="flex__item">
                            <div class="block7 layout">
                                <img src="jobListPage/web/assets/2e3698b3a081d14c989ecd23ce11064b.png" alt="" class="icon1 layout" />
                                <div class="box1 layout"></div>
                                <div class="box2 layout"></div>
                            </div>
                        </div>
                        <div class="spacer flex__spacer"></div>
                        <div class="text_body layout1">
                            <a href="NewJobDetails.html"
                               style="text-decoration: none; color:rgb(138, 169, 182);">New job
                            </a>
                        </div>
                    </div>
                </div>
                <div class="block8 layout">
                    <div class="group layout">
                        <div class="block9 layout">
                            <div class="block9__item">
                                <img src="jobListPage/web/assets/8b73df92d952918e0c0e80b6327c6403.png" alt="" class="icon1 layout1" />
                            </div>
                            <div class="spacer block9__spacer"></div>
                            <div class="text_body1 layout">Job list</div>
                        </div>
                    </div>
                </div>
                <div class="block4 layout1">
                    <div class="group layout">
                        <div class="block5 layout">
                            <div class="block5__item1">
                                <img src="jobListPage/web/assets/f0bf2e7c6123ebe172530398396c947c.png" alt="" class="icon1 layout1" />
                            </div>
                            <div class="spacer block5__spacer1"></div>
                            <div class="text_body layout2">
                                <a href="ViewResumePage.html"
			                       style="text-decoration: none; color:rgb(138, 169, 182);">View resume
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="block4 layout1">
                    <div class="group layout">
                        <div class="block5 layout">
                            <div class="block5__item2">
                                <img src="jobListPage/web/assets/bbebb6522097e302bec83deb7c6d2e4b.png" alt="" class="icon1 layout1" />
                            </div>
                            <div class="spacer block5__spacer2"></div>
                            <div class="text_body layout3">
                                <a href="ContactsListPage.html"
			                       style="text-decoration: none; color:rgb(138, 169, 182);">Contact list
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="block10 layout">
               <img src="jobListPage/web/assets/3e014b751bec254b92667feb27ddf5a7.png" alt="" class="decorator layout" />
		       <img src="jobListPage/web/assets/3e014b751bec254b92667feb27ddf5a7.png" alt="" class="decorator layout1" />
                <div class="block11 layout">
                    <px-posize track-style='{"flexGrow":1}' x="56fr 28.21% 56fr" y="12.5px minmax(0px, 15fr) 12.5fr">
                        <div class="small_text_body">Logout</div>
                    </px-posize>
                </div>
                <div style="--src:url(../assets/5de2224ccd85afb81825eb968620f18d.png)" class="block12 layout">
                    <div class="box5 layout"></div>
                </div>
            </div>
            <div class="box6 layout"></div>
            <div class="box7 layout"></div>
            <h1 class="big_title layout">?</h1>
        </div>

        <div class="block13 layout3">
            <table id="jobTable">
                <tr>
                    <th>Job Title</th>
                    <th>No of Posts</th>
                    <th>Qualification Required</th>
	                <th>Experience Required</th>
	                <th>Last Date to Apply</th>
	                <th>Company</th>
	                <th>Country</th>
	                <th>State</th>
	                <th>Job ID</th>
                </tr>
            </table>
        </div>

        <div class="block20 layout">
            <h2 class="medium_title layout">Job list</h2>
        </div>
        <div class="block21 layout">
            <div class="block21__item">
                <div class="block22 layout">
                     
                    <div style="--src:url(../assets/21f8a5dcc9431a42525053b9fd5fa455.svg)" class="block23 layout">
                        <img src="jobListPage/web/assets/949bdaf521405b99f1bb83433425c2d1.png" alt="" class="icon2 layout" />
                    </div>
                    <div class="box9 layout"></div>
                </div>
            </div>
            <div class="spacer block21__spacer"></div>
            <div class="block21__item">
                <img src="jobListPage/web/assets/7889e0a33f6e2d2e06a337c7bc245670.png" alt="" class="icon3 layout" />
            </div>
        </div>
        <div class="block24 layout"></div>
        <div class="block25 layout">	
			<a href="NewJobDetails.html" style="text-decoration: none; color:rgb(138, 169, 182);">
            <h5 class="highlights layout">Add</h5></a>		
        </div>
        <div class="box11 layout"></div>
        <img src="jobListPage/web/assets/f69da57513d04411cc146070ab3f302d.png" alt="" class="image6 layout" />
        <div class="block26 layout">
            <div class="flex layout1">
                <div class="small_text_body2 layout">Search Task</div>
                <div class="spacer flex__spacer1"></div>
                <div class="flex__item1">
                    <img src="jobListPage/web/assets/9b7cfe300e916466102cf2fa13f9c7f4.png" alt="" class="icon4 layout" />
                </div>
            </div>
        </div>
		
		
	<div id="myModal" class="modal">	
        <div class="block27 layout">
		    <!---   <div class="modal-content">   --->
                <span class="close">&times;</span>		
                <div class="block28 layout">
                    <px-posize x="32px 27fr 62fr" y="10px minmax(0px, 17fr) 10fr" absolute="true">
                        <div class="text_body2" onClick="editJob()">Edit</div>
                    </px-posize>
                    <div style="--src:url(../assets/c0377aa3ae8127f789c0a894897c7c6e.png)" class="block29 layout"></div>
                </div>
                 <!--<div class="block30 layout">
                 <div class="text_body3 layout">Mute</div>
                 </div>  -->
                <div class="block31 layout">              
                    <div style="--src:url(../assets/88a08900bc341cc51c8e7323a114744a.png)" class="block32 layout"></div>
                    <px-posize x="32px 44fr 45fr" y="9px minmax(0px, 17fr) 10fr" absolute="true">
                        <div class="text_body4" onClick="deleteJob()">Delete</div>
                    </px-posize>
                </div>		
			<!---   </div>   --->
        </div>  
	</div>	
		
		
<!---		
        <h5 class="highlights1 layout">Previous</h5>
        <h5 class="highlights2 layout">Next</h5>
        <h4 class="highlights3 layout">2</h4>
        <h2 class="medium_title1 layout">1</h2>
        <h4 class="highlights3 layout1">3</h4>
        <h4 class="highlights3 layout2">4</h4>
        <div class="box16 layout"></div>
        <h5 class="highlights2 layout1">Per page</h5>
        <img src="jobListPage/web/assets/f211ae50299e3328d5af67021f5cb9e6.png" alt="" class="image8 layout" />
        <h5 class="highlights4 layout">7</h5>
        <img src="jobListPage/web/assets/f4c8b486c285cfb5b4bb486c29a2d1a9.png" alt="" class="image9 layout" />
		    --->
    </div>
    <script type="text/javascript">
	
    AOS.init();
	
	let selectedRowIndex, allJobs;
			 
    fetch('http://192.168.0.14:8081/RumangoWebsite/jobs-api/fetchAllJobsInfo', {
         method: 'GET',         
        }).then(function(response){ 
             return response.json()}).then(function(data)
        {
		  console.log(data);	
		  console.log(data.length);
		  allJobs=data;
          for (let i = 0; i < data.length; i++) { 
		     const row = document.createElement('tr');
		     row.addEventListener('click', () => {
			     selectedRowIndex = i;
			     modal.style.display = "block";
		        });
		     ['jobTitle','noOfPost','qualificationRequired','experienceRequired','lastDateToApply','companyName','country','state','jobId'].forEach(cell => {
			     const column = data[i][cell];
			     const columnNode =document.createElement('td');
			     columnNode.innerHTML = column;
			     row.appendChild(columnNode);
		        });
			 document.getElementById('jobTable').appendChild(row);
               /*document.getElementById("jobTitle").innerHTML += data[i].jobTitle +"</br>";
               document.getElementById("noOfPost").innerHTML += data[i].noOfPost+"</br>";
               document.getElementById("qualificationRequired").innerHTML += data[i].qualificationRequired+"</br>";
			   document.getElementById("experienceRequired").innerHTML += data[i].experienceRequired+"</br>";
			   document.getElementById("lastDateToApply").innerHTML += data[i].lastDateToApply+"</br>";
			   document.getElementById("companyName").innerHTML += data[i].companyName+"</br>";
			   document.getElementById("country").innerHTML += data[i].country+"</br>";
			   document.getElementById("state").innerHTML += data[i].state+"</br>";
			   document.getElementById("jobId").innerHTML += data[i].jobId+"</br>";*/
            }
        }).catch(error => console.error('Error:', error)); 
		
		//getData();
       //async function getData(){
       //const response= await fetch('http://192.168.0.14:8081/RumangoWebsite/jobs-api/fetchAllJobsInfo’)
       //console.log(response);
       //const data= await response.json();
       //console.log(data);
       //length=data.drinks.length;
       //console.log(data);
       //var temp="";
       //for(i=0;i<length;i++)
       //{
       //   temp+="<tr>";
        //  temp+="<td>"+data.drinks[i].strDrink+"</td>";
        //  temp+="<td>"+data.drinks[i].strInstructions+"</td>";
       //}
       //document.getElementById("data").innerHTML=temp;
       //}
		
	function deleteJob() {
	 console.log(allJobs[selectedRowIndex].jobId);
	 fetch('http://192.168.0.14:8081/RumangoWebsite/jobs-api/deleteJobsInfoById?jobId='
		  +allJobs[selectedRowIndex].jobId, {
          method: 'DELETE',         
        }).catch(error => console.error('Error:', error));
		   alert('Job Record Deleted.');		   
	}
		
		var modal = document.getElementById("myModal");
		//var btn = document.getElementById("jobTitle");
		var span = document.getElementsByClassName("close")[0];
		/* btn.onclick = function() {
              modal.style.display = "block";
        }*/
		span.onclick = function() {
		console.log("inside span onclick");
          modal.style.display = "none";
        }
		window.onclick = function(event) {
		console.log("inside window onclick");
            if (event.target == modal) {
			 console.log("inside window onclick if");
             modal.style.display = "none";
            }
        }
		
		function editJob() {
		 console.log(allJobs[selectedRowIndex]);
		 localStorage["jobId"] = allJobs[selectedRowIndex].jobId;
		 localStorage["jobTitle"] = allJobs[selectedRowIndex].jobTitle;
		 localStorage["noOfPost"] = allJobs[selectedRowIndex].noOfPost;
		 localStorage["descriptions"] = allJobs[selectedRowIndex].descriptions;
		 localStorage["qualificationRequired"] = allJobs[selectedRowIndex].qualificationRequired;
		 localStorage["experienceRequired"] = allJobs[selectedRowIndex].experienceRequired;
		 localStorage["specializationRequired"] = allJobs[selectedRowIndex].specializationRequired;
		 localStorage["lastDateToApply"] = allJobs[selectedRowIndex].lastDateToApply;
		 localStorage["salary"] = allJobs[selectedRowIndex].salary;
		 localStorage["jobType"] = allJobs[selectedRowIndex].jobType;
		 localStorage["companyName"] = allJobs[selectedRowIndex].companyName;
		 localStorage["logoUrl"] = allJobs[selectedRowIndex].logoUrl;
		 localStorage["website"] = allJobs[selectedRowIndex].website;
		 localStorage["email"] = allJobs[selectedRowIndex].email;
		 localStorage["address"] = allJobs[selectedRowIndex].address;
		 localStorage["state"] = allJobs[selectedRowIndex].state;
		 localStorage["country"] = allJobs[selectedRowIndex].country;
		 location.replace("http://192.168.0.14:8081/rumangowebsite/NewJobDetails.html");
		}
		
		
    </script>
</body>
<style>
body {font-family: Arial, Helvetica, sans-serif;}

/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
}

/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}
</style>
</html>