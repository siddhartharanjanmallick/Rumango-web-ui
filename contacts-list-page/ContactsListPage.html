<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />
    <link rel="stylesheet" href="ContactsListPage.css">
    <link rel="stylesheet" href="../src/css/common.css">
    <script type="text/javascript" src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script type="text/javascript" src="https://unpkg.com/headroom.js@0.12.0/dist/headroom.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/px2code/posize/build/v1.00.6.js"></script>


</head>

<body style="display: flex; flex-direction: column">
    <div class="contacts-list-page block layout">
        
        <div class="block1 layout">
            <img src="../src/assets/9c71b8eadfebaada652a3203c32bb9f5.png" alt="" class="image layout" />
            <div style="--src:url(../src/assets/fad3bb21f0460df1a9d73cdc935618d2.png)" class="block2 layout"></div>
            <div class="block3 layout">
                <div class="block4 layout">
                    <div class="group layout">
                        <div class="block5 layout">
                            <div class="block5__item">
                                <img src="../src/assets/7167ce581006f73e6f64164742db669e.png" alt="" class="icon layout" />
                            </div>
                            <div class="spacer block5__spacer"></div>
                            <div class="text_body layout">
                                <a href="../admin-dashboard/AdminDashboard.html"
                                   style="text-decoration: none; color:rgb(138, 169, 182);">Dashboard
                             </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="block6 layout">
                    <div class="flex layout">
                        <div class="flex__item">
                            <div class="block7 layout">
                                <img src="../src/assets/2e3698b3a081d14c989ecd23ce11064b.png" alt="" class="icon1 layout" />
                                <div class="box layout"></div>
                                <div class="box1 layout"></div>
                            </div>
                        </div>
                        <div class="spacer flex__spacer"></div>
                        <div class="text_body layout1">
                            <a href="../new-job-list/NewJobDetails.html"
			                   style="text-decoration: none; color:rgb(138, 169, 182);">New job
                            </a>
                        </div>
                    </div>
                </div>
                <div class="block4 layout1">
                    <div class="group layout">
                        <div class="block5 layout">
                            <div class="block5__item1">
                                <img src="../src/assets/862296fcd3c41112a7c39e969c5e4fa8.png" alt="" class="icon1 layout1" />
                            </div>
                            <div class="spacer block5__spacer1"></div>
                            <div class="text_body layout2">
                                <a href="../JobListPage/JobListPage.html"
			                       style="text-decoration: none; color:rgb(138, 169, 182);">Job list
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="block4 layout1">
                    <div class="group layout">
                        <div class="block5 layout">
                            <div class="block5__item2">
                                <img src="../src/assets/f0bf2e7c6123ebe172530398396c947c.png" alt="" class="icon1 layout1" />
                            </div>
                            <div class="spacer block5__spacer2"></div>
                            <div class="text_body layout3">
                                <a href="../view-resume/ViewResumePage.html"
			                       style="text-decoration: none; color:rgb(138, 169, 182);">View resume
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="block8 layout">
                    <div class="group layout">
                        <div class="block9 layout">
                            <div class="block9__item">
                                <img src="../src/assets/ee3825412cbaff7b7bd6b4d30b5f8981.png" alt="" class="icon1 layout1" />
                            </div>
                            <div class="spacer block9__spacer"></div>
                            <div class="text_body1 layout">Contact list</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="block10 layout">
                <img src="../src/assets/3e014b751bec254b92667feb27ddf5a7.png" alt="" class="decorator layout" />
		<img src="../src/assets/3e014b751bec254b92667feb27ddf5a7.png" alt="" class="decorator layout1" />
                <div class="block11 layout">
                    <px-posize track-style='{"flexGrow":1}' x="56fr 28.21% 56fr" y="12.5px minmax(0px, 15fr) 12.5fr">
                        <div class="small_text_body"><a href="../login/loginPage.html" style="text-decoration: none;color: #000;">Logout</a></div>
                    </px-posize>
                </div>
                <div style="--src:url(../src/assets/5de2224ccd85afb81825eb968620f18d.png)" class="block12 layout">
                    <div class="box4 layout"></div>
                </div>
            </div>
            
            <h1 class="big_title layout">?</h1>
        </div>


        <div class="block13 layout1">
            <table id="contactsTable">
                <tbody>
                <tr style="position: relative;
                bottom: 10px; background-color: #5b92ff;">
                    <th>Name</th>
                    <th>Email</th>
	                <th>Phone No</th>
	                <th>Message</th>
                </tr>
            </tbody>
            </table>
        </div>


        <!-- <img src="contactsListPage/web/assets/c7f0928eb79479046c4b56ca6c54192b.png" alt="" class="image3 layout" />
        <div class="block14 layout">
            <div class="text_body2 layout">+33757005467</div>
        </div>
        <div class="block15 layout">
            <div class="text_body2 layout">jamesmullican5346@.com</div>
        </div>
        <div class="block16 layout">
            <div class="text_body2 layout">James Mullican</div>
        </div>
        <div class="block13 layout1"></div>
        <img src="contactsListPage/web/assets/c7f0928eb79479046c4b56ca6c54192b.png" alt="" class="image3 layout1" />
        <div class="block14 layout1">
            <div class="text_body2 layout">+33757005467</div>
        </div>
        <div class="block17 layout">
            <div class="text_body2 layout">annejacob2@ummoh.com</div>
        </div>
        <div class="block18 layout">
            <div class="text_body2 layout">Anne Jacob</div>
        </div>
        <div class="block13 layout2"></div>
        <img src="contactsListPage/web/assets/c7f0928eb79479046c4b56ca6c54192b.png" alt="" class="image3 layout2" />
        <div class="block14 layout2">
            <div class="text_body2 layout">+33757005467</div>
        </div>
        <div class="block19 layout">
            <div class="text_body2 layout">christinehuston4@.com</div>
        </div>
        <div class="block20 layout">
            <div class="text_body2 layout">Christine Huston</div>
        </div>
        <div class="block13 layout3"></div>
        <img src="contactsListPage/web/assets/c7f0928eb79479046c4b56ca6c54192b.png" alt="" class="image3 layout3" />
        <div class="block14 layout3">
            <div class="text_body2 layout">+33757005467</div>
        </div>
        <div class="block21 layout">
            <div class="text_body2 layout">bethanyjackson5@.com</div>
        </div>
        <div class="block22 layout">
            <div class="text_body2 layout">Bethany Jackson</div>
        </div>
        <div class="block13 layout4"></div>
        <img src="contactsListPage/web/assets/c7f0928eb79479046c4b56ca6c54192b.png" alt="" class="image3 layout4" />
        <div class="block14 layout4">
            <div class="text_body2 layout">+33757005467</div>
        </div>
        <div class="block21 layout1">
            <div class="text_body2 layout">markruffalo3735@.com</div>
        </div>
        <div class="block23 layout">
            <div class="text_body2 layout">Mark Ruffalo</div>
        </div>
        <div class="block13 layout5"></div>
        <img src="contactsListPage/web/assets/c7f0928eb79479046c4b56ca6c54192b.png" alt="" class="image3 layout5" />
        <div class="block14 layout5">
            <div class="text_body2 layout">+63475700546</div>
        </div>
        <div class="block24 layout">
            <div class="text_body2 layout">jhondeo24823@.com</div>
        </div>
        <div class="block25 layout">
            <div class="text_body2 layout">Jhon Deo</div>
        </div>
        <div class="block13 layout6"></div>
        <img src="contactsListPage/web/assets/c7f0928eb79479046c4b56ca6c54192b.png" alt="" class="image3 layout6" />
        <div class="block14 layout6">
            <div class="text_body2 layout">+83757305467</div>
        </div>
        <div class="block26 layout">
            <div class="text_body2 layout">adrienewatson82@.com</div>
        </div>
        <div class="block27 layout">
            <div class="text_body2 layout">Adriene Watson</div>
        </div>
        <div class="block13 layout7"></div>
        <img src="contactsListPage/web/assets/c7f0928eb79479046c4b56ca6c54192b.png" alt="" class="image3 layout7" />
        <div class="block14 layout7">
            <div class="text_body2 layout">+33757805467</div>
        </div>
        <div class="block28 layout">
            <div class="text_body2 layout">john carilo182@.com</div>
        </div>
        <div class="block29 layout">
            <div class="text_body2 layout">John Carilo</div>
        </div>
        <div class="block13 layout8"></div>
        <img src="contactsListPage/web/assets/c7f0928eb79479046c4b56ca6c54192b.png" alt="" class="image3 layout8" />
        <div class="block14 layout8">
            <div class="text_body2 layout">+33757005467</div>
        </div>
        <div class="block30 layout">
            <div class="text_body2 layout">robertbacins4182@.com</div>
        </div>
        <div class="block31 layout">
            <div class="text_body2 layout">Robert Bacins</div>
        </div>
        <div class="block13 layout9"></div>
        <div class="block31 layout1">
            <div class="text_body2 layout">Shelby Goode</div>
        </div>
        <img src="contactsListPage/web/assets/0fb2c3aed6d3a7dc6c66eac91da873b4.png" alt="" class="image3 layout9" />
        <div class="block14 layout9">
            <div class="text_body2 layout">+33757005467</div>
        </div>
        <div class="block32 layout">
            <div class="text_body2 layout">shelbygoode481@gmail.com</div>
        </div>
        <div class="box7 layout"></div>
        <div class="block25 layout1">
            <div class="text_body2 layout">John Deo</div>
        </div>
        <div style="--src:url(../assets/5644114f1fa7429262c29f40392aa212.png)" class="block33 layout"></div>
        <div class="text_body2 layout1">+33757005467</div>
        <div class="text_body2 layout2">Lorem ipsum dolor sit amet, consectetur adipiscing elit,</div>
        <div class="text_body2 layout3">Lorem ipsum...</div>
        <div class="text_body2 layout4">Hi..</div>
        <div class="text_body2 layout5">Lorem ipsum dolor sit amet, consectetur adipiscing elit,</div>
        <div class="text_body2 layout6">Lorem ipsum dolor sit amet,</div>
        <div class="text_body2 layout7">Lorem ipsum dolor sit,</div>
        <div class="text_body2 layout8">Lorem ipsum dolor sit amet, consectetur</div>
        <div class="text_body2 layout9">Lorem ipsum dolor sit amet, consectetur</div>
        <div class="text_body2 layout10">Hello...</div>
        <div class="text_body2 layout11">Lorem ipsum dolor sit amet, consectetur adipiscing elit,</div>
        <div class="text_body2 layout12">Lorem..</div>
        <div class="block34 layout">
            <div class="text_body2 layout">johndoe2211@gmail.com</div>
        </div> -->


        <!-- <px-posize x="291px 35fr 1114fr" y="171px minmax(0px, 15fr) 838fr" absolute="true">
            <div class="small_text_body1">Name</div>
        </px-posize><img src="contactsListPage/web/assets/3d836dc934c67ce684b469526f356dbe.png" alt="" class="image5 layout" />
	<img src="contactsListPage/web/assets/3d836dc934c67ce684b469526f356dbe.png" alt="" class="image5 layout1" />
        <px-posize x="468px 33fr 939fr" y="171px minmax(0px, 15fr) 838fr" absolute="true">
            <div class="small_text_body1">Email</div>
        </px-posize><img src="contactsListPage/web/assets/3d836dc934c67ce684b469526f356dbe.png" alt="" class="image5 layout2" />
        <px-posize x="699px 82fr 659fr" y="171px minmax(0px, 15fr) 838fr" absolute="true">
            <div class="small_text_body1">Phone number</div>
        </px-posize><img src="contactsListPage/web/assets/3d836dc934c67ce684b469526f356dbe.png" alt="" class="image5 layout3" />
        <px-posize x="875px 51fr 514fr" y="171px minmax(0px, 15fr) 838fr" absolute="true">
            <div class="small_text_body1">Message</div>
        </px-posize> -->


        <div class="block35 layout">
            <h2 class="medium_title layout">Contact list</h2>
        </div>
        <div class="block36 layout">
            <div class="block36__item">
                <div class="block37 layout">
                    
                    <div style="--src:url(../src/assets/21f8a5dcc9431a42525053b9fd5fa455.svg)" class="block38 layout">
                        <img src="../src/assets/949bdaf521405b99f1bb83433425c2d1.png" alt="" class="icon2 layout" />
                        
                    </div>
                    <div class="box8 layout"></div>
                </div>
            </div>
            <div class="spacer block36__spacer"></div>
            <div class="block36__item">
                <img src="../src/assets/7889e0a33f6e2d2e06a337c7bc245670.png" alt="" class="icon3 layout" />
            </div>
        </div>


    <div id="myModal" class="modal">
        <div class="block39 layout"> 
            <span class="close">&times;</span>           
            <div class="block40 layout">
                <div class="text_body3 layout">
                    <a href="../reply-page/ReplyPage.html"
                       style="text-decoration: none; color:rgb(138, 169, 182);">Reply
                    </a>
                </div>
            </div>
            <div class="block41 layout">
                
                <div style="--src:url(../src/assets/88a08900bc341cc51c8e7323a114744a.png)" class="block42 layout"></div>
                <px-posize x="32px 44fr 45fr" y="9px minmax(0px, 17fr) 10fr" absolute="true">
                    <div class="text_body4" onClick="deleteContact()">Delete</div>
                </px-posize>
            </div>
        </div>
    </div>


        <img src="../src/assets/3d42bc4b2851ee332ef278311b6f93c6.png" alt="" class="icon4 layout" />
        <div class="block43 layout">
            <div class="flex layout1">
                <div class="small_text_body2 layout">Search Task</div>
                <div class="spacer flex__spacer1"></div>
                <div class="flex__item1">
                    <img src="../src/assets/9b7cfe300e916466102cf2fa13f9c7f4.png" alt="" class="icon5 layout" />
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        AOS.init();

        let selectedRowIndex, allContacts;

        fetch('http://192.168.0.14:8081/RumangoWebsite/contact-api/fetchAllMessagesInfo', {
         method: 'GET',         
        }).then(function(response){ 
             return response.json()}).then(function(data)
        {
		  console.log(data);
		  console.log(data.length);
		  allContacts=data;
          for (let i = 0; i < data.length; i++) {
		     const row = document.createElement('tr');
		     row.addEventListener('click', () => {
			     selectedRowIndex = i;
                 localStorage.setItem("dta_fromcontactPage" ,JSON.stringify(data[i]) );
			     modal.style.display = "block";
		        });
		     ['name', 'email', 'phoneNumber', 'message'].forEach(cell => {
			     const column = data[i][cell];
			     const columnNode =document.createElement('td');
			     columnNode.innerHTML = column;
			     row.appendChild(columnNode);
		        });
			 document.getElementById('contactsTable').appendChild(row);
            }
        }).catch(error => console.error('Error:', error));


    function deleteContact() {
	 console.log(allContacts[selectedRowIndex].id);
	 fetch('http://192.168.0.14:8081/RumangoWebsite/contact-api/deleteMessageInfoById?id='
		  +allContacts[selectedRowIndex].id, {
          method: 'DELETE',         
        }).catch(error => console.error('Error:', error));
		   alert('Contact Record Deleted.');		   
	}


        var modal = document.getElementById("myModal");
		var span = document.getElementsByClassName("close")[0];
		span.onclick = function() {
		console.log("inside span onclick");
          modal.style.display = "none";
        }
		window.onclick = function(event) {
		console.log("inside window onclick");
            if (event.target == modal) {
			console.log("inside window onclick if");
             modal.style.display = "none";
            }
        }


    </script>
</body>
<style>
    body {font-family: Arial, Helvetica, sans-serif;}
    
    /* The Modal (background) */
    .modal {
      display: none; /* Hidden by default */
      position: fixed; /* Stay in place */
      z-index: 1; /* Sit on top */
      padding-top: 100px; /* Location of the box */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgb(0,0,0); /* Fallback color */
      background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }
    
    /* Modal Content */
    .modal-content {
      background-color: #fefefe;
      margin: auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
    }
    
    /* The Close Button */
    .close {
      color: #aaaaaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }
    
    .close:hover,
    .close:focus {
      color: #000;
      text-decoration: none;
      cursor: pointer;
    }
    </style>
</html>