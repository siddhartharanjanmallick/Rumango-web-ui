
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" 
integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
  <!--  <link rel="stylesheet" type="text/css" href="viewResumePage/web/css/common.css" />
    <link rel="stylesheet" type="text/css" href="viewResumePage/web/css/fonts.css" />
    <link rel="stylesheet" type="text/css" href="viewResumePage/web/css/ViewResumePage.css" /> -->
    <link rel="stylesheet" type="text/css" href="ViewResumePage.css">
    <link rel="stylesheet" href="../src/css/common.css">
    <script type="text/javascript" src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script type="text/javascript" src="https://unpkg.com/headroom.js@0.12.0/dist/headroom.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/px2code/posize/build/v1.00.6.js"></script>


</head>

<body style="display: flex; flex-direction: column">
    <div class="view-resume-page block layout">
        
        <div class="block1 layout">
            <img src="images/9c71b8eadfebaada652a3203c32bb9f5.png" alt="" class="image layout" />
            <div style="--src:url(images/fad3bb21f0460df1a9d73cdc935618d2.png)" class="block2 layout"></div>
            <div class="block3 layout">
                <div class="block4 layout">
                    <div class="group layout">
                        <div class="block5 layout">
                            <div class="block5__item">
                                <img src="images/7167ce581006f73e6f64164742db669e.png" alt="" class="icon layout" />
                            </div>
                            <div class="spacer block5__spacer"></div>
                            <div class="text_body layout">
                                <a href="../admin-dashboard/AdminDashboard.html"
                                   style="text-decoration: none; color:rgb(138, 169, 182);">Dashboard
                             </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="block6 layout">
                    <div class="flex layout">
                        <div class="flex__item">
                            <div class="block7 layout">
                                <img src="images/2e3698b3a081d14c989ecd23ce11064b.png" alt="" class="icon1 layout" />
                                <div class="box layout"></div>
                                <div class="box1 layout"></div>
                            </div>
                        </div>
                        <div class="spacer flex__spacer"></div>
                        <div class="text_body layout1">
                            <a href="../new-job-list/NewJobDetails.html"
			                   style="text-decoration: none; color:rgb(138, 169, 182);">New job
                            </a>
                        </div>
                    </div>
                </div>
                <div class="block4 layout1">
                    <div class="group layout">
                        <div class="block5 layout">
                            <div class="block5__item1">
                                <img src="images/862296fcd3c41112a7c39e969c5e4fa8.png" alt="" class="icon1 layout1" />
                            </div>
                            <div class="spacer block5__spacer1"></div>
                            <div class="text_body layout2">
                                <a href="../JobListPage/JobListPage.html"
                                   style="text-decoration: none; color:rgb(138, 169, 182);">Job list
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="block8 layout">
                    <div class="group layout">
                        <div class="block9 layout">
                            <div class="block9__item">
                                <img src="images/fa695a2541b75eecc18557e43018a37b.png" alt="" class="icon1 layout1" />
                            </div>
                            <div class="spacer block9__spacer"></div>
                            <div class="text_body1 layout">View resume</div>
                        </div>
                    </div>
                </div>
                <div class="block4 layout1">
                    <div class="group layout">
                        <div class="block5 layout">
                            <div class="block5__item2">
                                <img src="images/bbebb6522097e302bec83deb7c6d2e4b.png" alt="" class="icon1 layout1" />
                            </div>
                            <div class="spacer block5__spacer2"></div>
                            <div class="text_body layout3">
                                <a href="../contacts-list-page/ContactsListPage.html"
                                   style="text-decoration: none; color:rgb(138, 169, 182);">Contact list
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="block10 layout">
                <img src="images/3e014b751bec254b92667feb27ddf5a7.png" alt="" class="decorator layout" />
		        <img src="images/3e014b751bec254b92667feb27ddf5a7.png" alt="" class="decorator layout1" />
                <div class="block11 layout">
                    <px-posize track-style='{"flexGrow":1}' x="56fr 28.21% 56fr" y="12.5px minmax(0px, 15fr) 12.5fr">
                        <div class="small_text_body"><a href="../login/loginPage.html" style="text-decoration: none; color: #000;">Logout</a></div>
                    </px-posize>
                </div>
                <div style="--src:url(images/5de2224ccd85afb81825eb968620f18d.png)" class="block12 layout">
                    <div class="box4 layout"></div>
                </div>
            </div>
            <div class="box5 layout"></div>
            <div class="box6 layout"></div>
            <h1 class="big_title layout">?</h1>
        </div>
		
		
        <div class="block13 layout9">
   		    <table id="applicantTable" >
                <tr style="position: relative;
                top: 10px; background-color: #5b92ff;">
                    <th>Sl.No</th>
                    <th>First Name</th>
                    <th>Job ID</th>
                    <th>Email</th>
	                <th>Phone No</th>
	                <th>Applicant ID</th>
                    <th>Operations</th>
                    
                </tr>
            </table>
	    </div>	
		
		
        <div class="block42 layout">
            <h2 class="medium_title layout">View resume</h2>
        </div>
        <div class="block43 layout">
            <div class="block43__item">
                <div class="block44 layout">
                    
                    <div style="--src:url(images/21f8a5dcc9431a42525053b9fd5fa455.svg)" class="block45 layout">
                        <img src="images/949bdaf521405b99f1bb83433425c2d1.png" alt="" class="icon2 layout" />
                    </div>
                    <div class="box10 layout"></div>
                </div>
            </div>
            <div class="spacer block43__spacer"></div>
            <div class="block43__item">
                <img src="../src/assets/2942380326c1176418fcc85b1e444217.png" alt="" class="icon3 layout" />
            </div>
        </div>
        <div class="block46 layout"></div>
        <div class="block47 layout">
            <h5 class="highlights layout" onClick="downloadAllResumes()">Download all</h5>
        </div>
        <img src="images/9a1a4c9d27b3e94a64c1962efa22050c.png" alt="" 
		     class="image5 layout" onClick="downloadAllResumes()"/>
	    <img src="images/47974aff94768befbcfe37bb35e416a9.png" alt="" 
		     class="image6 layout" onClick="downloadAllResumes()"/>
        <div class="box12 layout"></div>
	
	
<div id="myModal" class="modal">
	<div class="block48 layout">
	    <!---   <div class="modal-content">   --->
            <span class="close">&times;</span>
            <div class="block49 layout">
                <div class="text_body5 layout" onClick="downloadResume()">Download</div>
            </div>
            <div class="block50 layout">
                <div style="--src:url(images/88a08900bc341cc51c8e7323a114744a.png)" class="block51 layout"></div>
                <px-posize x="32px 44fr 45fr" y="9px minmax(0px, 17fr) 10fr" absolute="true">
                    <div class="text_body6" onClick="deleteApplicant()">Delete</div>
                </px-posize>
        <!---   </div>   --->	
        </div>
	</div>
</div>

  
<!--        <img src="images/49b341075ee55ef43566f8d9089b7404.png" alt="" 
		     class="image8 layout" onClick="downloadAllResumes()"/> -->
        <div class="block52 layout">
            <div class="flex layout1">
                <div class="small_text_body2 layout">Search Task</div>
                <div class="spacer flex__spacer1"></div>
                <div class="flex__item1">
                    <img src="images/9b7cfe300e916466102cf2fa13f9c7f4.png" alt="" class="icon4 layout" />
                </div>
            </div>
        </div>
    </div>
	
	
<script type="text/javascript">
        
	AOS.init();
		
	let selectedRowIndex, allApplicants, allResumes;
	
	function downloadResume() {
		console.log(allApplicants[selectedRowIndex]);
		console.log(allApplicants[selectedRowIndex].resumeLink);
		 window.open(allApplicants[selectedRowIndex].resumeLink);
		//location.href = allApplicants[selectedRowIndex].resumeLink;
		alert("Resume Downloaded");
	}

	function downloadAllResumes() {
		fetch('http://192.168.0.14:8081/RumangoWebsite/applicant-api/downloadAllResume', {
        method: 'GET',         
        }).then(function(response){ 
        return response.json()}).then(function(data)
        {
		  console.log(data);
		  allResumes=data;
		  console.log(allResumes.length);
	      for(i=0;i<allResumes.length;i++) {		     
			 //setTimeout(() => {
			     window.open(allResumes[i]);
			     //location.href = allResumes[i];
			    //}, 1000);
		    }
        }).catch(error => console.error('Error:', error));
		   alert('All resumes will be downloaded.');		   
	}	
	
	
	function deleteApplicant() {
	 console.log(allApplicants[selectedRowIndex].applicantId);
	 fetch('http://192.168.0.14:8081/RumangoWebsite/applicant-api/deleteApplicantsInfoById?applicantId='
		  +allApplicants[selectedRowIndex].applicantId, {
          method: 'DELETE',         
        }).catch(error => console.error('Error:', error));
		   alert('Applicant Record Deleted.');		   
	}
	
	
	fetch('http://192.168.0.14:8081/RumangoWebsite/applicant-api/fetchApplicantsInfo', {
         method: 'GET',         
        }).then(function(response){ 
             return response.json()}).then(function(data)
        {
		  console.log(data);
		  console.log(data.length);
		  allApplicants=data;
          for (let i = 0; i < data.length; i++) {
		     const row = document.createElement('tr');
		     row.addEventListener('click', () => {
			     selectedRowIndex = i;
			    //modal.style.display = "block";
		        });
                const sino = document.createElement('td');
                sino.innerHTML ='<p>'+(i+1)+'</p>';
                 
                row.appendChild(sino);
		     ['firstName', 'jobId', 'email', 'mobile', 'applicantId' ].forEach(cell => {
			     const column = data[i][cell];
			     const columnNode =document.createElement('td');
			     columnNode.innerHTML = column;
			     row.appendChild(columnNode);
		        });
                const node = document.createElement('td');
                node.innerHTML = '<div><input type="image" src="../src/assets/download.png" style="width:20px; height:20px;" onClick="downloadResume()"/> &nbsp &nbsp &nbsp  <input type="image" src="../src/assets/88a08900bc341cc51c8e7323a114744a.png" onClick="deleteApplicant()"/> </div>';
                row.appendChild(node);

               
               
			 document.getElementById('applicantTable').appendChild(row);
               /*document.getElementById("firstName").innerHTML += data[i].firstName +"</br>";
               document.getElementById("jobId").innerHTML += data[i].jobId+"</br>";
               document.getElementById("email").innerHTML += data[i].email+"</br>";
			   document.getElementById("mobile").innerHTML += data[i].mobile+"</br>";
			   document.getElementById("applicantId").innerHTML += data[i].applicantId+"</br>";
			   applicantResume = data[i].resumeLink;
			   console.log(applicantResume);
			   //document.getElementById("resumeLink").innerHTML += data[i].resumeLink+"</br>"; */
            }
        }).catch(error => console.error('Error:', error)); 
		
		
		var modal = document.getElementById("myModal");
		//var btn = document.getElementById("firstName");
		var span = document.getElementsByClassName("close")[0];
		/* btn.onclick = function() {
              modal.style.display = "block";
        }*/
		span.onclick = function() {
		console.log("inside span onclick");
          modal.style.display = "none";
        }
		window.onclick = function(event) {
		console.log("inside window onclick");
            if (event.target == modal) {
			console.log("inside window onclick if");
             modal.style.display = "none";
            }
        }
		
</script>
</body>
<style>
body {font-family: Arial, Helvetica, sans-serif;}

/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
}

/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}
</style>
</html>